<template>
  <style>
    h3 { color: orange; }
    div { color: purple; }
  </style>

  <h3 id="title"></h3>
  <div id="tweets"></div>
</template>

<script type="text/javascript">
  (function () {
    "use strict";

    var template = document.currentScript.ownerDocument.querySelector('template');

    class Channel extends HTMLElement {
      createdCallback() {
        var node = document.importNode(template.content, true);
        this.createShadowRoot();
        this.shadowRoot.appendChild(node);
        this.tweets = [];
        this.list = this.shadowRoot.querySelector('#tweets');
      }

      setData(tweets) {
        this.tweets = tweets;
        this.tweets.forEach(function(tweet) {
          var node = document.createElement('x-tweet');
          node.setData(tweet);
          this.list.appendChild(node);
        }, this);
      }
    }

    document.registerElement("x-channel", Channel);
  })();
</script>
