<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Coolol</title>
    <style media="screen">
      body /deep/ * {
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
      }
      body {
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <x-app>
      <div id="loading" style="position: fixed; background: white; width: 100vw; height: 100vh; z-index: 1000;">
        <div style="position: relative; text-align: center; top: 50%; transform: translateY(-50%);">
          <h1>Loading...</h1>
        </div>
      </div>
    </x-app>

    <script type="text/javascript">
      var features_missing = [];
      // Test HTML5 local storage
      if(typeof(Storage) === "undefined") {
        features_missing.push("Can't read from storage!");
      }
      // Test Object.assign
      if (typeof(Object.assign) !== 'function') {
        features_missing.push("Can't use Object.assign!");
      }
      // Test HTML template support
      if (!('content' in document.createElement('template'))) {
        features_missing.push("Can't use HTML template!");
      }
      // Test shadow dom support
      if (typeof document.body.createShadowRoot !== 'function') {
        features_missing.push("Can't use shadow dom!");
      }
      // Test arrow function
      try {
        new Function( "(y => y)" );
      } catch (err) {
        features_missing.push("Can't use arrow function!");
      }
      // Tell user
      if (features_missing.length > 0) {
        var $loading = document.body.querySelector('#loading');
        $loading.id = 'error';
        var $container = $loading.querySelector('div');
        $container.querySelector('h1').textContent = "Some JavaScript features are missing!";
        features_missing.forEach(function (feature) {
          var $item = document.createElement('h3');
          $item.textContent = feature;
          $container.appendChild($item);
        });
        var $tip = document.createElement('h2');
        $tip.textContent = 'Tip: Use the latest Chrome browser.';
        $container.appendChild($tip);
      }
    </script>

    <!-- Libararies -->
    <script src="vendor/jsoneditor@4.2.1/jsoneditor.min.js"></script>
    <script src="vendor/codebird-js@2.6.0/codebird.js"></script>
    <script src="vendor/twitter-text@1.13.2/twitter-text.js"></script>

    <!-- global utils -->
    <script src="service/utils.js"></script>
    <script src="service/twitter.js"></script>
    <script src="service/store.js"></script>

    <!-- custom elements -->
    <link rel="import" href="component/app.html">
  </body>
</html>
